# -*- coding: utf-8 -*-
# Test script for the Powerplay DSL

# This is a global system configuration
configuration :system do |c|
  c.playbook_directory "playbooks"
end

# A playbook must be explicitely invoked from
# command line by default. Playbooks will execute
# in parallel unless otherwise specified.
playbooks :development do

  # sá¹•ecific configuration for :development
  configuration do |c|
    c.stack :development
    c.krell_type "t2.small"
    c.servers 1
    c.rolling 3
    c.krell_disk_size 20
  end

  # Groups are executed serially.
  group :first, "our very first group" do
    # Books within a group are executed in parallel,
    # and therefore must be independent of each other.
    book :nat, "nat.yml"
  end

  group :second, "our second group" do
    book :rabbit, "rabbitmq_cluster.yml" do |b|
      b.krell_type "t2.medium"
    end

    book :es_cluster, "elasticsearch_cluster.yml" do |b|
      b.esver "1.7.4"
      b.cluster_name :es
      b.servers 3
      b.heapsize "2g"
      b.krell_type "t2.medium"
      b.krell_disk_size 200
    end
  end
end
